gsap.config({
    nullTargetWarn: !1
});
var M = {
    data: null,
    init: function() {
        M.loadData()
    },
    loadData: function() {
        var a = new XMLHttpRequest;
        a.onreadystatechange = function() {
            if (200 === a.status && 4 === a.readyState) {
                var d = JSON.parse(a.responseText);
                M.data = d
            }
        }
        ;
        a.open("post", "./data.json");
        a.send()
    }
}
  , V = {
    hero: null,
    projects: null,
    main: null,
    init: function() {
        V.loader()
    },
    loader: function() {
        CustomEase.create("easeOutExpo", C.easeOutExpo);
        CustomEase.create("easeInExpo", C.easeInExpo);
        var a = {
            value: 0
        };
        gsap.timeline({}).to(".loader-line", {
            x: 0,
            y: 0,
            z: 0,
            ease: "easeOutExpo",
            duration: 2,
            stagger: {
                each: 0.01
            }
        }).to(a, {
            value: 100,
            duration: 0.1,
            roundProps: {
                value: 1
            },
            onUpdate: function() {
                document.querySelector(".loader-counter").innerHTML = a.value
            },
            onComplete: function() {
                C.init()
            }
        }).to(".loader", {
            opacity: 0,
            ease: "easeOutExpo",
            onComplete: function() {
                document.querySelector(".loader").remove()
            }
        }).to([".logo", ".availability"], {
            opacity: 1,
            ease: "easeInExpo"
        }).to(".hero-line", {
            x: 0,
            y: 0,
            z: 0,
            ease: "easeOutExpo",
            duration: 1,
            stagger: {
                each: 0.1
            }
        })
    },
    // initLinkAnimation: function(a) {
    //     CustomEase.create("easeOutExpo", C.easeOutExpo);
    //     gsap.fromTo(a.target.firstChild, {
    //         x: "-100%",
    //         y: 0,
    //         z: 0
    //     }, {
    //         x: 0,
    //         y: 0,
    //         z: 0,
    //         ease: "easeOutExpo",
    //         duration: .5
    //     })
    // },
    // endLinkAnimation: function(a) {
    //     CustomEase.create("easeOutExpo", C.easeOutExpo);
    //     gsap.to(a.target.firstChild, {
    //         x: "100%",
    //         y: 0,
    //         z: 0,
    //         ease: "easeOutExpo",
    //         duration: .5
    //     })
    // },
    renderProject: function(a) {
        var d = V.template.content.cloneNode(!0)
          , b = d.querySelector(".col")
          , k = d.querySelector(".render-images")
          , m = d.querySelector(".preview")
          , l = a.main.images
          , e = a.header.paragraphs
          , c = document.createElement("span")
          , h = d.querySelector(".id");
        c.textContent = a.header.no;
        h.appendChild(c);
        for (a = 0; a < e.length; a++) {
            if (0 === a)
                for (c = 0; c < e[0].length; c++) {
                    h = e[0][c];
                    var g = document.createElement("div")
                      , f = document.createElement("span");
                    f.textContent = h;
                    f.classList.add("render-line");
                    g.appendChild(f);
                    b.appendChild(g)
                }
            if (1 === a)
                for (c = 0; c < e[1].length; c++)
                    h = e[1][c],
                    g = document.createElement("div"),
                    f = document.createElement("span"),
                    f.textContent = h,
                    f.classList.add("render-line"),
                    g.appendChild(f),
                    0 === c && g.classList.add("mt-4"),
                    b.appendChild(g);
            if (2 === a)
                for (c = 0; c < e[2].length; c++)
                    h = e[2][c],
                    g = document.createElement("div"),
                    f = document.createElement("span"),
                    f.textContent = h,
                    f.classList.add("render-line"),
                    g.appendChild(f),
                    0 === c && g.classList.add("mt-4"),
                    b.appendChild(g);
            if (3 === a)
                for (c = 0; c < e[3].length; c++)
                    h = e[3][c],
                    g = document.createElement("div"),
                    f = document.createElement("span"),
                    f.textContent = h,
                    f.classList.add("render-line"),
                    g.appendChild(f),
                    0 === c && g.classList.add("mt-4"),
                    b.appendChild(g)
        }
        for (b = 0; b < l.length; b++)
            e = l[b],
            a = document.createElement("li"),
            c = document.createElement("img"),
            h = document.createElement("span"),
            c.src = e.src,
            c.alt = e.alt,
            c.id = e.id,
            h.textContent = e.caption,
            a.appendChild(c),
            a.appendChild(h),
            a.classList.add("render-image"),
            980 < window.innerWidth ? 2 === b || 3 === b || 7 === b || 8 === b ? a.style.marginTop = "160px" : null : 2 === b || 3 === b || 7 === b || 8 === b ? a.style.marginTop = "80px" : null,
            k.appendChild(a);
        for (k = 0; k < l.length; k++)
            b = l[k],
            e = document.createElement("div"),
            a = document.createElement("img"),
            a.src = b.src,
            a.alt = b.alt,
            a.dataset.id = b.id,
            a.classList.add("preview-el"),
            a.classList.add("preview-image-img"),
            e.appendChild(a),
            e.classList.add("preview-image"),
            980 < window.innerWidth ? 2 === k || 3 === k || 7 === k || 8 === k ? e.style.marginTop = "20px" : null : null,
            m.appendChild(e);
        V.main.appendChild(d);
        V.animateProject()
    },
    animateProject: function() {
        CustomEase.create("easeOutExpo", C.easeOutExpo);
        CustomEase.create("easeInExpo", C.easeInExpo);
        var a = gsap.timeline({})
          , d = document.querySelector(".render");
        a.to([V.hero, V.projects, ".footer"], {
            ease: "easeOutExpo",
            opacity: 0,
            onStart: function() {
                C.locomotive.stop()
            },
            onComplete: function() {
                C.locomotive.scrollTo("top", 0, 0, [.87, 0, .13, 1], !0, function() {});
                V.hero.style.display = "none";
                V.projects.style.display = "none";
                d.style.display = "block"
            }
        }).to(".hero-line", 0, {
            x: 0,
            y: 20,
            z: 0,
            onComplete: function() {
                C.locomotive.start()
            }
        }).to([d, ".close", ".footer"], {
            ease: "easeInExpo",
            opacity: 1
        }).to(".render-line", {
            x: 0,
            y: 0,
            z: 0,
            ease: "easeOutExpo",
            duration: 1,
            stagger: {
                each: .05
            },
            onStart: function() {
                C.staggerImages();
                C.staggerPreview()
            }
        })
    },
    renderIndex: function() {
        var a = document.querySelector(".close");
        CustomEase.create("easeOutExpo", C.easeOutExpo);
        CustomEase.create("easeInExpo", C.easeInExpo);
        var d = gsap.timeline({});
        a.addEventListener("click", function() {
            var b = document.querySelector(".render");
            d.to([b, ".close", ".footer"], {
                ease: "easeOutExpo",
                opacity: 0,
                onStart: function() {
                    C.locomotive.stop()
                },
                onComplete: function() {
                    C.locomotive.scrollTo("top", 0, 0, [.87, 0, .13, 1], !0, function() {});
                    b.style.display = "none";
                    V.hero.style.display = "block";
                    V.projects.style.display = "block"
                }
            }).to(".render-line", 0, {
                x: 0,
                y: 20,
                z: 0,
                onComplete: function() {
                    C.locomotive.start()
                }
            }).to([V.hero, V.projects, ".footer"], {
                ease: "easeInExpo",
                opacity: 1,
                onComplete: function() {
                    b.remove()
                }
            }).to(".hero-line", {
                x: 0,
                y: 0,
                z: 0,
                ease: "easeOutExpo",
                duration: 1,
                stagger: {
                    each: .05
                }
            })
        })
    }
}
  , C = {
    locomotive: null,
    links: null,
    easeInOutExpo: "0.87, 0, 0.13, 1",
    easeOutExpo: "0.16, 1, 0.3, 1",
    easeInExpo: "0.7, 0, 0.84, 0",
    top: null,
    template: null,
    init: function() {
        C.initLocomotive();
        V.animateLogo();
        C.linksHandler();
        C.handlerProjects();
        V.renderIndex()
    },
    initLocomotive: function() {
        gsap.registerPlugin(ScrollTrigger);
        C.locomotive = new LocomotiveScroll({
            el: document.querySelector("[data-scroll-container]"),
            smooth: !0,
            smoothMobile: !0
        });
        C.initGSAP();
        C.returnTop()
    },
    initGSAP: function() {
        C.locomotive.on("scroll", ScrollTrigger.update);
        ScrollTrigger.scrollerProxy(".smooth-scroll", {
            scrollTop: function(a) {
                return arguments.length ? C.locomotive.scrollTo(a, 0, 0) : C.locomotive.scroll.instance.scroll.y
            },
            getBoundingClientRect: function() {
                return {
                    top: 0,
                    left: 0,
                    width: window.innerWidth,
                    height: window.innerHeight
                }
            },
            pinType: document.querySelector(".smooth-scroll").style.transform ? "transform" : "fixed"
        });
        ScrollTrigger.addEventListener("refresh", function() {
            return C.locomotive.update()
        });
        ScrollTrigger.refresh();
        ScrollTrigger.defaults({
            scroller: ".smooth-scroll"
        })
    },
    linksHandler: function() {
        C.links = document.querySelectorAll(".link-content");
        C.links.forEach(function(a) {
            a.addEventListener("mouseenter", V.initLinkAnimation);
            a.addEventListener("mouseout", V.endLinkAnimation)
        })
    },
    returnTop: function() {
        C.top = document.querySelector(".return-top");
        C.top.addEventListener("click", function() {
            C.locomotive.scrollTo("top", 0, 2200, [.87, 0, .13, 1], !0, function() {})
        })
    },
    staggerImages: function() {
        gsap.utils.toArray(".render-image").forEach(function(a) {
            gsap.from(a, {
                scrollTrigger: {
                    trigger: a,
                    start: "top 50%",
                    end: "bottom 50%",
                    toggleClass: "image-inview"
                }
            })
        })
    },
    staggerPreview: function() {
        CustomEase.create("easeInOutExpo", C.easeInOutExpo);
        gsap.to(".preview-el", {
            x: 0,
            y: 0,
            z: 0,
            ease: "easeInOutExpo",
            duration: 1.5,
            stagger: {
                each: .05,
                ease: "easeOutExpo",
                from: "random"
            },
            onComplete: function() {
                document.querySelectorAll(".preview-image-img").forEach(function(a) {
                    a.addEventListener("click", function(d) {
                        d = document.getElementById(d.target.dataset.id);
                        C.locomotive.scrollTo(d, -(window.innerHeight / 2 - d.offsetHeight / 2), 2200, [.87, 0, .13, 1], !0, function() {})
                    })
                })
            }
        })
    },
    handlerProjects: function() {
        V.template = document.getElementById("template");
        V.hero = document.querySelector(".hero");
        V.projects = document.querySelector(".projects");
        V.main = document.querySelector(".main");
        var a = document.querySelectorAll(".project");
        CustomEase.create("easeOutExpo", C.easeOutExpo);
        a.forEach(function(d) {
            d.addEventListener("click", function(b) {
                V.renderProject(M.data[b.target.dataset.id])
            });
            d.addEventListener("mouseenter", function() {
                var b = d.querySelector(".project-arrow-svg");
                gsap.fromTo(b, {
                    x: "-100%",
                    y: 0,
                    z: 0
                }, {
                    x: 0,
                    y: 0,
                    z: 0,
                    duration: .4,
                    ease: "easeInOutExpo"
                })
            });
            d.addEventListener("mouseleave", function() {
                var b = d.querySelector(".project-arrow-svg");
                gsap.to(b, {
                    x: "-100%",
                    y: 0,
                    z: 0,
                    duration: .4,
                    ease: "easeInOutExpo"
                })
            })
        })
    }
}
  , App = {
    init: function() {
        M.init();
        V.init()
    }
};
window.addEventListener("load", function() {
    App.init()
});
